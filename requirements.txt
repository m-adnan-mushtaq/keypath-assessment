KeyPath Backend Technical Test (v2)
Build a Node.js + Express REST API from scratch
• Node.js + Express
• TypeScript everywhere
• MongoDB (Atlas-friendly)
• Validation with Zod
• Modular structure (feature folders)
• Include a README with setup + tradeoffs
• Provide Postman collection or OpenAPI spec
Auth (lightweight but required)
• Implement JWT auth or stub Clerk/Auth0 with a middleware that reads:
o x-user-id, x-org-id, x-role (tenant|landlord|admin)
• Enforce org scoping on every endpoint.
Data model (minimum)
1. Property: address, orgId, nickname
2. Unit: propertyId, unitNumber, rent
3. TenantProfile: unitId, orgId, name, email
4. OwnershipCreditTransaction (ledger; append-only)
Fields: orgId, tenantId, unitId, type (EARN|ADJUST|REDEEM), amount, memo,
createdAt
Endpoints (minimum)
Properties
• POST /properties (landlord/admin)
• GET /properties (landlord/admin) with pagination + filters (city/state)
• GET /properties/:id (scoped)
Units
• POST /properties/:id/units (landlord/admin)
• GET /properties/:id/units (landlord/admin)
Tenants
• POST /units/:id/tenants (landlord/admin)
• GET /tenants/me (tenant) → tenant profile + unit basic info
Ownership Credits (ledger)
• POST /tenants/:id/credits/earn (landlord/admin) → creates ledger txn
• POST /tenants/:id/credits/redeem (tenant) → creates ledger txn
• GET /tenants/:id/credits/ledger (tenant sees self; landlord/admin sees tenants in
org) + pagination
• GET /tenants/:id/credits/balance → computed from ledger (no stored balance)
Business rules to enforce (what separates strong candidates)
• Ledger is append-only (no update/delete). If correction needed, add an ADJUST txn.
• A tenant can only redeem up to their computed balance.
• Every query must be org-scoped (no leaking).
• Standard error shape + input validation.
• Add at least 3 tests (Jest) covering: auth scoping, redeem rule, and balance
derivation.
Bonus (optional, high signal)
• Add an async job using BullMQ/Redis:
o POST /properties/:id/valuation/snapshot enqueues a job that writes a
valuationSnapshots record
• Add an index strategy in a short note (which fields you indexed and why).
Submission
• Clear README to run the project and short guide about the code and file structure